<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>WebSocket.Listener (Java SE 17 &amp; JDK 17 [build 6])</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: module: java.net.http, package: java.net.http, interface: WebSocket, interface: Listener">
<meta name="generator" content="javadoc/ClassWriterImpl">
<meta name="keywords" content="java.net.http.WebSocket.Listener interface">
<meta name="keywords" content="onOpen()">
<meta name="keywords" content="onText()">
<meta name="keywords" content="onBinary()">
<meta name="keywords" content="onPing()">
<meta name="keywords" content="onPong()">
<meta name="keywords" content="onClose()">
<meta name="keywords" content="onError()">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header"><div style="padding: 6px; text-align: center; font-size: 80%; font-family: DejaVu Sans, Arial, Helvetica, sans-serif; font-weight: normal;">This specification is not final and is subject to change. Use is subject to <a href="https://www.oracle.com/java/javase/terms/license/java17speclicense.html">license terms</a>.</div>
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><div style="margin-top: 9px;"><strong>Java SE 17 &amp; JDK 17</strong> <br><strong>DRAFT 17-crac+6-21</strong></div></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/WebSocket.Listener.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../preview-list.html">Preview</a></li>
<li><a href="../../../../new-list.html">New</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="module-label-in-type">Module</span>&nbsp;<a href="../../../module-summary.html">java.net.http</a></div>
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">java.net.http</a></div>
<h1 title="Interface WebSocket.Listener" class="title">Interface WebSocket.Listener</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Enclosing interface:</dt>
<dd><a href="WebSocket.html" title="interface in java.net.http">WebSocket</a></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public static interface </span><span class="element-name type-name-label">WebSocket.Listener</span></div>
<div class="block">The receiving interface of <code>WebSocket</code>.

 <p> A <code>WebSocket</code> invokes methods of the associated listener
 passing itself as an argument. These methods are invoked in a thread-safe
 manner, such that the next invocation may start only after the previous
 one has finished.

 <p> When data has been received, the <code>WebSocket</code> invokes a receive
 method. Methods <code>onText</code>, <code>onBinary</code>, <code>onPing</code> and
 <code>onPong</code> must return a <code>CompletionStage</code> that completes once
 the message has been received by the listener. If a listener's method
 returns <code>null</code> rather than a <code>CompletionStage</code>,
 <code>WebSocket</code> will behave as if the listener returned a
 <code>CompletionStage</code> that is already completed normally.

 <p> An <code>IOException</code> raised in <code>WebSocket</code> will result in an
 invocation of <code>onError</code> with that exception (if the input is not
 closed). Unless otherwise stated if the listener's method throws an
 exception or a <code>CompletionStage</code> returned from a method completes
 exceptionally, the WebSocket will invoke <code>onError</code> with this
 exception.</div>
<dl class="notes">
<dt>API Note:</dt>
<dd>The strict sequential order of invocations from
 <code>WebSocket</code> to <code>Listener</code> means, in particular, that the
 <code>Listener</code>'s methods are treated as non-reentrant. This means that
 <code>Listener</code> implementations do not need to be concerned with
 possible recursion or the order in which they invoke
 <code>WebSocket.request</code> in relation to their processing logic.

 <p> Careful attention may be required if a listener is associated
 with more than a single <code>WebSocket</code>. In this case invocations
 related to different instances of <code>WebSocket</code> may not be ordered
 and may even happen concurrently.

 <p> <code>CompletionStage</code>s returned from the receive methods have
 nothing to do with the
 <a href="WebSocket.html#counter">counter of invocations</a>.
 Namely, a <code>CompletionStage</code> does not have to be completed in order
 to receive more invocations of the listener's methods.
 Here is an example of a listener that requests invocations, one at a
 time, until a complete message has been accumulated, then processes
 the result, and completes the <code>CompletionStage</code>:
 <pre><code>    WebSocket.Listener listener = new WebSocket.Listener() {

        List&lt;CharSequence&gt; parts = new ArrayList&lt;&gt;();
        CompletableFuture&lt;?&gt; accumulatedMessage = new CompletableFuture&lt;&gt;();

        public CompletionStage&lt;?&gt; onText(WebSocket webSocket,
                                         CharSequence message,
                                         boolean last) {
            parts.add(message);
            webSocket.request(1);
            if (last) {
                processWholeText(parts);
                parts = new ArrayList&lt;&gt;();
                accumulatedMessage.complete(null);
                CompletionStage&lt;?&gt; cf = accumulatedMessage;
                accumulatedMessage = new CompletableFuture&lt;&gt;();
                return cf;
            }
            return accumulatedMessage;
        }
    ...
    } </code> </pre></dd>
<dt>Since:</dt>
<dd>11</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab5" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab5', 3)" class="table-tab">Default Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default <a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#onBinary(java.net.http.WebSocket,java.nio.ByteBuffer,boolean)" class="member-name-link">onBinary</a><wbr>(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
 <a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;data,
 boolean&nbsp;last)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">A binary data has been received.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default <a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#onClose(java.net.http.WebSocket,int,java.lang.String)" class="member-name-link">onClose</a><wbr>(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
 int&nbsp;statusCode,
 <a href="../../../../java.base/java/lang/String.html" title="class in java.lang">String</a>&nbsp;reason)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Receives a Close message indicating the WebSocket's input has been
 closed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#onError(java.net.http.WebSocket,java.lang.Throwable)" class="member-name-link">onError</a><wbr>(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
 <a href="../../../../java.base/java/lang/Throwable.html" title="class in java.lang">Throwable</a>&nbsp;error)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">An error has occurred.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#onOpen(java.net.http.WebSocket)" class="member-name-link">onOpen</a><wbr>(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">A <code>WebSocket</code> has been connected.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default <a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#onPing(java.net.http.WebSocket,java.nio.ByteBuffer)" class="member-name-link">onPing</a><wbr>(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
 <a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;message)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">A Ping message has been received.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default <a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#onPong(java.net.http.WebSocket,java.nio.ByteBuffer)" class="member-name-link">onPong</a><wbr>(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
 <a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;message)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">A Pong message has been received.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default <a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#onText(java.net.http.WebSocket,java.lang.CharSequence,boolean)" class="member-name-link">onText</a><wbr>(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
 <a href="../../../../java.base/java/lang/CharSequence.html" title="interface in java.lang">CharSequence</a>&nbsp;data,
 boolean&nbsp;last)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">A textual data has been received.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="onOpen(java.net.http.WebSocket)">
<h3>onOpen</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onOpen</span><wbr><span class="parameters">(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket)</span></div>
<div class="block">A <code>WebSocket</code> has been connected.

 <p> This is the initial invocation and it is made once. It is
 typically used to make a request for more invocations.</div>
<dl class="notes">
<dt>Implementation Requirements:</dt>
<dd>The default implementation is equivalent to:
 <pre><code>    webSocket.request(1); </code></pre></dd>
<dt>Parameters:</dt>
<dd><code>webSocket</code> - the WebSocket that has been connected</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="onText(java.net.http.WebSocket,java.lang.CharSequence,boolean)">
<h3>onText</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type"><a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</span>&nbsp;<span class="element-name">onText</span><wbr><span class="parameters">(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
 <a href="../../../../java.base/java/lang/CharSequence.html" title="interface in java.lang">CharSequence</a>&nbsp;data,
 boolean&nbsp;last)</span></div>
<div class="block">A textual data has been received.

 <p> Return a <code>CompletionStage</code> which will be used by the
 <code>WebSocket</code> as an indication it may reclaim the
 <code>CharSequence</code>. Do not access the <code>CharSequence</code> after
 this <code>CompletionStage</code> has completed.</div>
<dl class="notes">
<dt>Implementation Requirements:</dt>
<dd>The default implementation is equivalent to:
 <pre><code>    webSocket.request(1);
    return null; </code></pre></dd>
<dt>Implementation Note:</dt>
<dd>The <code>data</code> is always a legal UTF-16 sequence.</dd>
<dt>Parameters:</dt>
<dd><code>webSocket</code> - the WebSocket on which the data has been received</dd>
<dd><code>data</code> - the data</dd>
<dd><code>last</code> - whether this invocation completes the message</dd>
<dt>Returns:</dt>
<dd>a <code>CompletionStage</code> which completes when the
 <code>CharSequence</code> may be reclaimed; or <code>null</code> if it may be
 reclaimed immediately</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="onBinary(java.net.http.WebSocket,java.nio.ByteBuffer,boolean)">
<h3>onBinary</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type"><a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</span>&nbsp;<span class="element-name">onBinary</span><wbr><span class="parameters">(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
 <a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;data,
 boolean&nbsp;last)</span></div>
<div class="block">A binary data has been received.

 <p> This data is located in bytes from the buffer's position to its
 limit.

 <p> Return a <code>CompletionStage</code> which will be used by the
 <code>WebSocket</code> as an indication it may reclaim the
 <code>ByteBuffer</code>. Do not access the <code>ByteBuffer</code> after
 this <code>CompletionStage</code> has completed.</div>
<dl class="notes">
<dt>Implementation Requirements:</dt>
<dd>The default implementation is equivalent to:
 <pre><code>    webSocket.request(1);
    return null; </code></pre></dd>
<dt>Parameters:</dt>
<dd><code>webSocket</code> - the WebSocket on which the data has been received</dd>
<dd><code>data</code> - the data</dd>
<dd><code>last</code> - whether this invocation completes the message</dd>
<dt>Returns:</dt>
<dd>a <code>CompletionStage</code> which completes when the
 <code>ByteBuffer</code> may be reclaimed; or <code>null</code> if it may be
 reclaimed immediately</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="onPing(java.net.http.WebSocket,java.nio.ByteBuffer)">
<h3>onPing</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type"><a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</span>&nbsp;<span class="element-name">onPing</span><wbr><span class="parameters">(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
 <a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;message)</span></div>
<div class="block">A Ping message has been received.

 <p> As guaranteed by the WebSocket Protocol, the message consists of
 not more than <code>125</code> bytes. These bytes are located from the
 buffer's position to its limit.

 <p> Given that the WebSocket implementation will automatically send a
 reciprocal pong when a ping is received, it is rarely required to
 send a pong message explicitly when a ping is received.

 <p> Return a <code>CompletionStage</code> which will be used by the
 <code>WebSocket</code> as a signal it may reclaim the
 <code>ByteBuffer</code>. Do not access the <code>ByteBuffer</code> after
 this <code>CompletionStage</code> has completed.</div>
<dl class="notes">
<dt>Implementation Requirements:</dt>
<dd>The default implementation is equivalent to:
 <pre><code>    webSocket.request(1);
    return null; </code></pre></dd>
<dt>Parameters:</dt>
<dd><code>webSocket</code> - the WebSocket on which the message has been received</dd>
<dd><code>message</code> - the message</dd>
<dt>Returns:</dt>
<dd>a <code>CompletionStage</code> which completes when the
 <code>ByteBuffer</code> may be reclaimed; or <code>null</code> if it may be
 reclaimed immediately</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="onPong(java.net.http.WebSocket,java.nio.ByteBuffer)">
<h3>onPong</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type"><a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</span>&nbsp;<span class="element-name">onPong</span><wbr><span class="parameters">(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
 <a href="../../../../java.base/java/nio/ByteBuffer.html" title="class in java.nio">ByteBuffer</a>&nbsp;message)</span></div>
<div class="block">A Pong message has been received.

 <p> As guaranteed by the WebSocket Protocol, the message consists of
 not more than <code>125</code> bytes. These bytes are located from the
 buffer's position to its limit.

 <p> Return a <code>CompletionStage</code> which will be used by the
 <code>WebSocket</code> as a signal it may reclaim the
 <code>ByteBuffer</code>. Do not access the <code>ByteBuffer</code> after
 this <code>CompletionStage</code> has completed.</div>
<dl class="notes">
<dt>Implementation Requirements:</dt>
<dd>The default implementation is equivalent to:
 <pre><code>    webSocket.request(1);
    return null; </code></pre></dd>
<dt>Parameters:</dt>
<dd><code>webSocket</code> - the WebSocket on which the message has been received</dd>
<dd><code>message</code> - the message</dd>
<dt>Returns:</dt>
<dd>a <code>CompletionStage</code> which completes when the
 <code>ByteBuffer</code> may be reclaimed; or <code>null</code> if it may be
 reclaimed immediately</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="onClose(java.net.http.WebSocket,int,java.lang.String)">
<h3>onClose</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type"><a href="../../../../java.base/java/util/concurrent/CompletionStage.html" title="interface in java.util.concurrent">CompletionStage</a>&lt;?&gt;</span>&nbsp;<span class="element-name">onClose</span><wbr><span class="parameters">(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
 int&nbsp;statusCode,
 <a href="../../../../java.base/java/lang/String.html" title="class in java.lang">String</a>&nbsp;reason)</span></div>
<div class="block">Receives a Close message indicating the WebSocket's input has been
 closed.

 <p> This is the last invocation from the specified <code>WebSocket</code>.
 By the time this invocation begins the WebSocket's input will have
 been closed.

 <p> A Close message consists of a status code and a reason for
 closing. The status code is an integer from the range
 <code>1000 &lt;= code &lt;= 65535</code>. The <code>reason</code> is a string which
 has a UTF-8 representation not longer than <code>123</code> bytes.

 <p> If the WebSocket's output is not already closed, the
 <code>CompletionStage</code> returned by this method will be used as an
 indication that the WebSocket's output may be closed. The WebSocket
 will close its output at the earliest of completion of the returned
 <code>CompletionStage</code> or invoking either of the <code>sendClose</code>
 or <code>abort</code> methods.</div>
<dl class="notes">
<dt>API Note:</dt>
<dd>Returning a <code>CompletionStage</code> that never completes,
 effectively disables the reciprocating closure of the output.

 <p> To specify a custom closure code or reason code the
 <code>sendClose</code> method may be invoked from inside the
 <code>onClose</code> invocation:
 <pre><code>    public CompletionStage&lt;?&gt; onClose(WebSocket webSocket,
                                      int statusCode,
                                      String reason) {
        webSocket.sendClose(CUSTOM_STATUS_CODE, CUSTOM_REASON);
        return new CompletableFuture&lt;Void&gt;();
    } </code> </pre></dd>
<dt>Implementation Requirements:</dt>
<dd>The default implementation of this method returns
 <code>null</code>, indicating that the output should be closed
 immediately.</dd>
<dt>Parameters:</dt>
<dd><code>webSocket</code> - the WebSocket on which the message has been received</dd>
<dd><code>statusCode</code> - the status code</dd>
<dd><code>reason</code> - the reason</dd>
<dt>Returns:</dt>
<dd>a <code>CompletionStage</code> which completes when the
 <code>WebSocket</code> may be closed; or <code>null</code> if it may be
 closed immediately</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="onError(java.net.http.WebSocket,java.lang.Throwable)">
<h3>onError</h3>
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">onError</span><wbr><span class="parameters">(<a href="WebSocket.html" title="interface in java.net.http">WebSocket</a>&nbsp;webSocket,
 <a href="../../../../java.base/java/lang/Throwable.html" title="class in java.lang">Throwable</a>&nbsp;error)</span></div>
<div class="block">An error has occurred.

 <p> This is the last invocation from the specified WebSocket. By the
 time this invocation begins both the WebSocket's input and output
 will have been closed. A WebSocket may invoke this method on the
 associated listener at any time after it has invoked <code>onOpen</code>,
 regardless of whether or not any invocations have been requested from
 the WebSocket.

 <p> If an exception is thrown from this method, resulting behavior is
 undefined.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>webSocket</code> - the WebSocket on which the error has occurred</dd>
<dd><code>error</code> - the error</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><a href="https://bugreport.java.com/bugreport/">Report a bug or suggest an enhancement</a><br> For further API reference and developer documentation see the <a href="https://docs.oracle.com/pls/topic/lookup?ctx=javase17&amp;id=homepage" target="_blank">Java SE Documentation</a>, which contains more detailed, developer-targeted descriptions with conceptual overviews, definitions of terms, workarounds, and working code examples. <a href="https://docs.oracle.com/en/java/javase/index.html">Other versions.</a><br> Java is a trademark or registered trademark of Oracle and/or its affiliates in the US and other countries.<br> <a href="../../../../../legal/copyright.html">Copyright</a> &copy; 1993, 2023, Oracle and/or its affiliates, 500 Oracle Parkway, Redwood Shores, CA 94065 USA.<br>All rights reserved. Use is subject to <a href="https://www.oracle.com/java/javase/terms/license/java17speclicense.html">license terms</a> and the <a href="https://www.oracle.com/technetwork/java/redist-137594.html">documentation redistribution policy</a>. <br><strong>DRAFT 17-crac+6-21</strong> <!-- Version 17-crac+6-21 --></small></p>
</footer>
</div>
</div>
</body>
</html>
